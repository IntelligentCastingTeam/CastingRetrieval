schema: '2.0'
stages:
  heat_code:
    cmd: conda activate modelretrieval && poetry run python .\src\Experiments\exp_heat_signatures.py
    deps:
    - path: ./data/voxel_model
      hash: md5
      md5: 8d66b548c6ddc0e626c83582d2b14d47.dir
      size: 419481600
      nfiles: 400
    params:
      params.yaml:
        code_extraction:
          model_path: ./data/voxel_model
          save_path: ./data/heat_signatures
          dim: 32
          steps: 36
          alpha: 0.06
    outs:
    - path: ./data/heat_signatures
      hash: md5
      md5: 015552fc3fee133563f63faf999cefbb.dir
      size: 287913
      nfiles: 1
  heat_code_comparison:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_code_distance.py
    deps:
    - path: ./data/heat_signatures/heat_codes.json
      hash: md5
      md5: 12ab9300c77d0775d2bd0fc82fa4d894
      size: 287913
    params:
      params.yaml:
        code_comparison:
          code_path: ./data/heat_signatures/heat_codes.json
          save_path: ./data/heat_code_distance
    outs:
    - path: ./data/heat_code_distance
      hash: md5
      md5: 33d2d05b48f24d8b4c9abd9548bc62f1.dir
      size: 7640766
      nfiles: 400
  statistic:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_similarity_statistcs.py
    deps:
    - path: ./data/heat_code_distance/
      hash: md5
      md5: 33d2d05b48f24d8b4c9abd9548bc62f1.dir
      size: 7640766
      nfiles: 400
    - path: ./src/Experiments/exp_similarity_statistcs.py
      hash: md5
      md5: 45d2ef53e89c58b1fb31cceccb4e7235
      size: 8129
    params:
      params.yaml:
        statistic:
          similarity_path: ./data/heat_code_distance/
          truth_path: ./data/similarity_truth.json
          save_path: ./data/statistic
          volume_thres: 0.8
          ssa_thres: 0.8
    outs:
    - path: ./data/similarity_truth.json
      hash: md5
      md5: 1f9fae32c1986b9b5ad8ab3f5e29be50
      size: 21048
    - path: ./data/statistic
      hash: md5
      md5: 65c64761b3e6a903875ed514151ea56f.dir
      size: 214916
      nfiles: 2
  hc_heat_code:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_cavity_code.py
    deps:
    - path: ./data/fill_inside/
      hash: md5
      md5: 45703cf767b86e21f234464a456e464a.dir
      size: 25372717
      nfiles: 400
    - path: ./data/labeled_cavities/
      hash: md5
      md5: 73f7601045f253575f0178d4bcb62fdd.dir
      size: 202623336
      nfiles: 400
    - path: ./src/Experiments/exp_cavity_code.py
      hash: md5
      md5: b4ddf53708cac741eb7338dbfb058e6f
      size: 2301
    params:
      params.yaml:
        cavity_code:
          hull_dim: 32
          cavity_dim: 8
          hull_path: ./data/fill_inside/
          cavity_path: ./data/labeled_cavities/
          save_path: ./data/cavity_code/
        code_extraction.alpha: 0.06
        code_extraction.steps: 36
    outs:
    - path: ./data/cavity_code/
      hash: md5
      md5: 1dc95b144b5ee40139a5c82e933ed6a8.dir
      size: 324377
      nfiles: 400
  hc_heat_code_comparison:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_cavity_code_similarity.py
    deps:
    - path: ./data/cavity_code
      hash: md5
      md5: 1dc95b144b5ee40139a5c82e933ed6a8.dir
      size: 324377
      nfiles: 400
    params:
      params.yaml:
        cavity_comparison:
          save_path: ./data/cavity_comparison
          code_path: ./data/cavity_code
    outs:
    - path: ./data/cavity_comparison
      hash: md5
      md5: 4d41d622fab58e4aae36eee3bac6cf1f.dir
      size: 16909254
      nfiles: 400
  hc_heat_code_statistic:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_cavity_heat_statistics.py
    deps:
    - path: ./data/cavity_comparison/
      hash: md5
      md5: 4d41d622fab58e4aae36eee3bac6cf1f.dir
      size: 16909254
      nfiles: 400
    - path: ./src/Experiments/exp_cavity_heat_statistics.py
      hash: md5
      md5: 4b602b773a38753aa2209de1cd4e010c
      size: 8119
    params:
      params.yaml:
        hc_statistic:
          code_path: ./data/cavity_comparison/
          save_path: ./data/hc_statistic
          volume_thres: 0.8
          ssa_thres: 0.8
          truth_path: ./data/similarity_truth.json
    outs:
    - path: ./data/hc_statistic
      hash: md5
      md5: 32709cb834dbd95fc9e412ecd4fce053.dir
      size: 216264
      nfiles: 2
  n2_statistic:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_n2_statistics.py
    deps:
    - path: ./data/n2_comparison/
      hash: md5
      md5: 40135b9d0d10077a559b2cd205b3c3d8.dir
      size: 12456525
      nfiles: 400
    - path: ./src/Experiments/exp_n2_statistics.py
      hash: md5
      md5: 5158bcece0941beb97dda307451fddbc
      size: 8337
    params:
      params.yaml:
        n2_statistic:
          code_path: ./data/n2_comparison/
          save_path: ./data/n2_statistic
          volume_thres: 0.8
          ssa_thres: 0.8
          truth_path: ./data/similarity_truth.json
    outs:
    - path: ./data/n2_statistic
      hash: md5
      md5: 817cd4efbc8a887fefd280e49d45a2cd.dir
      size: 219674
      nfiles: 2
  n2_hull_code:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_n2_hull_code.py
    deps:
    - path: ./data/voxel_model
      hash: md5
      md5: 8d66b548c6ddc0e626c83582d2b14d47.dir
      size: 419481600
      nfiles: 400
    params:
      params.yaml:
        n2_hull_code:
          model_path: ./data/voxel_model
          save_path: ./data/n2_hull_code
          shape:
          - 64
          - 64
          - 64
          dim: 60
    outs:
    - path: ./data/n2_hull_code
      hash: md5
      md5: cb55a9b50d71323ab1aea842a496bb97.dir
      size: 527202
      nfiles: 1
  n2_hull_similarity:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_n2_hull_code_similarity.py
    deps:
    - path: ./data/n2_hull_code/n2_hull_code.json
      hash: md5
      md5: 221bdd402413ad492b65335af58f1e07
      size: 527202
    params:
      params.yaml:
        n2_hull_code_similarity:
          code_path: ./data/n2_hull_code/n2_hull_code.json
          save_path: ./data/n2_hull_code_similarity
    outs:
    - path: ./data/n2_hull_code_similarity
      hash: md5
      md5: b57b0a8aa2aa0c7fdf74eb57f4fa11c6.dir
      size: 7640960
      nfiles: 400
  n2_hull_statistic:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_n2_hull_code_statistic.py
    deps:
    - path: ./data/n2_hull_code_similarity
      hash: md5
      md5: b57b0a8aa2aa0c7fdf74eb57f4fa11c6.dir
      size: 7640960
      nfiles: 400
    params:
      params.yaml:
        n2_hull_statistic:
          sim_path: ./data/n2_hull_code_similarity
          save_path: ./data/n2_hull_statistic
          volume_thres: 0.8
          ssa_thres: 0.8
          truth_path: ./data/similarity_truth.json
    outs:
    - path: ./data/n2_hull_statistic
      hash: md5
      md5: be6a8ab5ef97c500f598bd75716b06df.dir
      size: 219567
      nfiles: 2
