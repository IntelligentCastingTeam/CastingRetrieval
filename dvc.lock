schema: '2.0'
stages:
  heat_code:
    cmd: conda activate modelretrieval && poetry run python .\src\Experiments\exp_heat_signatures.py
    deps:
    - path: ./data/voxel_model
      hash: md5
      md5: 8d66b548c6ddc0e626c83582d2b14d47.dir
      size: 419481600
      nfiles: 400
    params:
      params.yaml:
        code_extraction:
          model_path: ./data/voxel_model
          save_path: ./data/heat_signatures
          dim: 64
          steps: 32
          alpha: 0.1
    outs:
    - path: ./data/heat_signatures
      hash: md5
      md5: 049276e7a4f25bd2e8a92fcfe80a7ff3.dir
      size: 581629
      nfiles: 1
  heat_code_comparison:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_code_distance.py
    deps:
    - path: ./data/heat_signatures/heat_codes.json
      hash: md5
      md5: 5d80df6ad30d659e34343507d5ffb657
      size: 581629
    params:
      params.yaml:
        code_comparison:
          code_path: ./data/heat_signatures/heat_codes.json
          save_path: ./data/heat_code_distance
    outs:
    - path: ./data/heat_code_distance
      hash: md5
      md5: ac79924fea5dc39aeaa305eae2f72236.dir
      size: 7689086
      nfiles: 400
  statistic:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_similarity_statistcs.py
    deps:
    - path: ./data/heat_code_distance/
      hash: md5
      md5: ac79924fea5dc39aeaa305eae2f72236.dir
      size: 7689086
      nfiles: 400
    params:
      params.yaml:
        statistic:
          similarity_path: ./data/heat_code_distance/
          truth_path: ./data/similarity_truth.json
          save_path: ./data/statistic
          volume_thres: 0.8
          ssa_thres: 0.8
    outs:
    - path: ./data/similarity_truth.json
      hash: md5
      md5: 1f9fae32c1986b9b5ad8ab3f5e29be50
      size: 21048
    - path: ./data/statistic
      hash: md5
      md5: 4af78e6cf55b4972d2416270f3713644.dir
      size: 161411
      nfiles: 1
  hc_heat_code:
    cmd: conda activate modelretrieval && poetry run python ./src/Experiments/exp_cavity_code.py
    deps:
    - path: ./data/fill_inside/
      hash: md5
      md5: 02cfe822e8c76317b831b4cbbe12f150.dir
      size: 26894185
      nfiles: 417
    - path: ./data/labeled_cavities/
      hash: md5
      md5: 6fdd9cf5ffd7bc9b905c599e7c14d1a2.dir
      size: 214779848
      nfiles: 417
    params:
      params.yaml:
        cavity_code:
          hull_dim: 64
          cavity_dim: 8
          steps: 32
          alpha: 0.1
          hull_path: ./data/fill_inside/
          cavity_path: ./data/labeled_cavities/
          save_path: ./data/cavity_code/
    outs:
    - path: ./data/cavity_code/
      hash: md5
      md5: c282fd26f4e40e7b4df7ad9f07bb0c09.dir
      size: 555336
      nfiles: 417
